<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Seasonal Ingredients Recommender - Silver Spoon Society</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="password-protection.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="logo-icon">
                    <img src="SliverSpoonSociety_Logo.jpg" alt="Silver Spoon Society Logo" class="custom-logo">
                </div>
                <div class="logo-text">
                    <h1>Silver Spoon Society</h1>
                </div>
            </a>

            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="explore-recipes.html" class="nav-link">
                    <i class="fas fa-search"></i>
                    <span>Recipes</span>
                </a>
                <a href="nutrition-dashboard.html" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="daily-recommendations.html" class="nav-link">
                    <i class="fas fa-heart"></i>
                    <span>Daily Tips</span>
                </a>
                <a href="meal-planning.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Planning</span>
                </a>
                <a href="shopping-list.html" class="nav-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Shopping</span>
                </a>
                <a href="seasonal-produce.html" class="nav-link active">
                    <i class="fas fa-leaf"></i>
                    <span>Seasonal</span>
                </a>
            </div>

            <button class="mobile-menu-btn" aria-label="Toggle mobile menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content seasonal-main">
        <!-- Hero Section -->
        <section class="hero">
            <h1><i class="fas fa-leaf"></i> Seasonal Ingredients Recommender</h1>
            <p>Discover what's fresh in your area and find perfect seasonal recipes</p>
        </section>

        <!-- Selector Section -->
        <section class="selector-section">
            <!-- Step 1: State Selector -->
            <div class="state-selector-container">
                <label for="stateSelect" class="selector-label">
                    <span class="step-number">Step 1</span>
                    <span class="step-title">Select Your State</span>
                </label>
                <select id="stateSelect" class="state-dropdown" aria-label="Select your state">
                    <option value="VIC">Victoria (VIC)</option>
                    <option value="NSW">New South Wales (NSW)</option>
                    <option value="QLD">Queensland (QLD)</option>
                    <option value="SA">South Australia (SA)</option>
                    <option value="WA">Western Australia (WA)</option>
                    <option value="TAS">Tasmania (TAS)</option>
                </select>
            </div>

            <!-- Step 2: Season Display and Slider -->
            <div class="season-selector-container">
                <div class="selector-label">
                    <span class="step-number">Step 2</span>
                    <span class="step-title">Current Season</span>
                </div>
                <button id="currentSeasonBtn" class="season-display-btn" aria-label="Current season">
                    <i class="fas fa-seedling"></i>
                    <span>Spring</span>
                </button>
                <div class="season-slider-wrapper">
                    <input
                        type="range"
                        id="seasonRange"
                        class="season-slider"
                        min="1"
                        max="12"
                        step="1"
                        aria-label="Select season by month"
                    />
                    <div class="season-labels">
                        <span class="season-label">Summer</span>
                        <span class="season-label">Autumn</span>
                        <span class="season-label">Winter</span>
                        <span class="season-label">Spring</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seasonal Lists Section -->
        <section class="seasonal-lists">
            <!-- Seasonal Fruits Card -->
            <div class="list-card fruits-card">
                <h3 class="list-card-title">
                    <i class="fas fa-apple-alt"></i>
                    <span>Seasonal Fruits</span>
                </h3>
                <ul id="fruitsList" class="ingredient-list" role="list">
                    <!-- Dynamically populated -->
                </ul>
            </div>

            <!-- Seasonal Vegetables Card -->
            <div class="list-card vegetables-card">
                <h3 class="list-card-title">
                    <i class="fas fa-carrot"></i>
                    <span>Seasonal Vegetables</span>
                </h3>
                <ul id="vegetablesList" class="ingredient-list" role="list">
                    <!-- Dynamically populated -->
                </ul>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="section-container">
            <div class="footer-content">
                <p class="footer-text">Supporting healthy eating habits for a better life</p>
                <p class="footer-copyright">Â© 2024 Silver Spoon Society. Designed for senior wellness.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // Global state variables
        let seasonalData = {};
        let currentState = 'VIC'; // Default to Victoria
        let currentSeason = '';
        let currentMonth = new Date().getMonth() + 1; // 1-12

        // Season configuration (Southern Hemisphere - Australia)
        const SEASON_CONFIG = {
            spring: { months: [9, 10, 11], name: 'Spring', icon: 'fa-seedling', label: 'Spring' },
            summer: { months: [12, 1, 2], name: 'Summer', icon: 'fa-sun', label: 'Summer' },
            autumn: { months: [3, 4, 5], name: 'Autumn', icon: 'fa-leaf', label: 'Autumn' },
            winter: { months: [6, 7, 8], name: 'Winter', icon: 'fa-snowflake', label: 'Winter' }
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
        });

        // Initialize page
        async function initializePage() {
            await loadSeasonalData();
            detectCurrentSeason();
            initializeEventListeners();

            // Set default state in dropdown
            const stateSelect = document.getElementById('stateSelect');
            if (stateSelect) {
                stateSelect.value = currentState; // Set to VIC
            }

            updateAllContent();
        }

        // Load seasonal data from JSON
        async function loadSeasonalData() {
            try {
                const response = await fetch('season_food.json');
                seasonalData = await response.json();
            } catch (error) {
                console.error('Error loading seasonal data:', error);
                showError('Failed to load seasonal data');
            }
        }

        // Removed - no longer loading recipes data for recommended section

        // Detect current season based on month
        function detectCurrentSeason() {
            for (const [seasonKey, config] of Object.entries(SEASON_CONFIG)) {
                if (config.months.includes(currentMonth)) {
                    currentSeason = seasonKey;
                    break;
                }
            }

            // Update slider position
            const slider = document.getElementById('seasonRange');
            slider.value = currentMonth;
            updateSeasonButton();
        }

        // Get season from month number
        function getSeasonFromMonth(month) {
            for (const [seasonKey, config] of Object.entries(SEASON_CONFIG)) {
                if (config.months.includes(month)) {
                    return seasonKey;
                }
            }
            return 'spring';
        }

        // Initialize all event listeners
        function initializeEventListeners() {
            // State dropdown
            const stateSelect = document.getElementById('stateSelect');
            stateSelect.addEventListener('change', function() {
                currentState = this.value;
                updateAllContent();
            });

            // Season slider
            const seasonSlider = document.getElementById('seasonRange');
            seasonSlider.addEventListener('input', function() {
                currentMonth = parseInt(this.value);
                currentSeason = getSeasonFromMonth(currentMonth);
                updateSeasonButton();
                updateAllContent();
            });

            // Mobile menu toggle
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');
            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', function() {
                    const isExpanded = this.getAttribute('aria-expanded') === 'true';
                    this.setAttribute('aria-expanded', !isExpanded);
                    navLinks.classList.toggle('show');
                });
            }
        }

        // Update season button display
        function updateSeasonButton() {
            const btn = document.getElementById('currentSeasonBtn');
            const config = SEASON_CONFIG[currentSeason];

            btn.innerHTML = `
                <i class="fas ${config.icon}"></i>
                <span>${config.name}</span>
            `;

            // Update button class for styling
            btn.className = `season-display-btn season-${currentSeason}`;
        }

        // Update all content
        function updateAllContent() {
            renderFruitsList();
            renderVegetablesList();
        }

        // Render fruits list
        function renderFruitsList() {
            const fruitsList = document.getElementById('fruitsList');

            if (!currentState || !seasonalData[currentState]) {
                fruitsList.innerHTML = '<li class="empty-message">Please select a state to see seasonal fruits</li>';
                return;
            }

            const stateData = seasonalData[currentState];
            const fruits = stateData.fruits || {};

            let fruitsHTML = '';
            for (const [fruitName, seasons] of Object.entries(fruits)) {
                const isInSeason = seasons.includes(currentSeason);
                const statusClass = isInSeason ? 'in-season' : 'not-in-season';
                const statusText = isInSeason ? 'In Season!' : 'Not in season';

                fruitsHTML += `
                    <li class="ingredient-row" role="listitem">
                        <span class="ingredient-icon"><i class="fas fa-apple-alt"></i></span>
                        <span class="ingredient-name">${capitalizeFirst(fruitName)}</span>
                        <div class="status-bar ${statusClass}" aria-label="${statusText}">
                            ${statusText}
                        </div>
                    </li>
                `;
            }

            fruitsList.innerHTML = fruitsHTML || '<li class="empty-message">No fruits data available</li>';
        }

        // Render vegetables list
        function renderVegetablesList() {
            const vegetablesList = document.getElementById('vegetablesList');

            if (!currentState || !seasonalData[currentState]) {
                vegetablesList.innerHTML = '<li class="empty-message">Please select a state to see seasonal vegetables</li>';
                return;
            }

            const stateData = seasonalData[currentState];
            const vegetables = stateData.vegetables || {};

            let vegetablesHTML = '';
            for (const [vegName, seasons] of Object.entries(vegetables)) {
                const isInSeason = seasons.includes(currentSeason);
                const statusClass = isInSeason ? 'in-season' : 'not-in-season';
                const statusText = isInSeason ? 'In Season!' : 'Not in season';

                vegetablesHTML += `
                    <li class="ingredient-row" role="listitem">
                        <span class="ingredient-icon"><i class="fas fa-carrot"></i></span>
                        <span class="ingredient-name">${capitalizeFirst(vegName)}</span>
                        <div class="status-bar ${statusClass}" aria-label="${statusText}">
                            ${statusText}
                        </div>
                    </li>
                `;
            }

            vegetablesList.innerHTML = vegetablesHTML || '<li class="empty-message">No vegetables data available</li>';
        }

        // Render recommended recipes
        // Removed - Recommended recipes functionality deleted

        // Show error message
        function showError(message) {
            console.error(message);
        }
    </script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
