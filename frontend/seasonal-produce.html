<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Seasonal Fruits & Vegetables - Silver Spoon Society</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="password-protection.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="logo-icon">
                    <img src="SliverSpoonSociety_Logo.jpg" alt="Silver Spoon Society Logo" class="custom-logo">
                </div>
                <div class="logo-text">
                    <h1>Silver Spoon Society</h1>
                </div>
            </a>

            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="explore-recipes.html" class="nav-link">
                    <i class="fas fa-search"></i>
                    <span>Recipes</span>
                </a>
                <a href="nutrition-dashboard.html" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="daily-recommendations.html" class="nav-link">
                    <i class="fas fa-heart"></i>
                    <span>Daily Tips</span>
                </a>
                <a href="meal-planning.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Planning</span>
                </a>
                <a href="shopping-list.html" class="nav-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Shopping</span>
                </a>
                <a href="seasonal-produce.html" class="nav-link active">
                    <i class="fas fa-leaf"></i>
                    <span>Seasonal</span>
                </a>
            </div>

            <button class="mobile-menu-btn" aria-label="Toggle mobile menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content seasonal-main">
        <!-- Hero Section -->
        <section class="seasonal-hero">
            <h1><i class="fas fa-leaf"></i> Seasonal Produce</h1>
            <p>Fresh fruits and vegetables for every season</p>
        </section>

        <!-- State Selector -->
        <div class="state-selector">
            <button class="state-btn active" data-state="NSW">
                <i class="fas fa-map-marker-alt"></i>
                NSW
            </button>
            <button class="state-btn" data-state="VIC">
                <i class="fas fa-map-marker-alt"></i>
                VIC
            </button>
            <button class="state-btn" data-state="QLD">
                <i class="fas fa-map-marker-alt"></i>
                QLD
            </button>
            <button class="state-btn" data-state="WA">
                <i class="fas fa-map-marker-alt"></i>
                WA
            </button>
            <button class="state-btn" data-state="SA">
                <i class="fas fa-map-marker-alt"></i>
                SA
            </button>
            <button class="state-btn" data-state="TAS">
                <i class="fas fa-map-marker-alt"></i>
                TAS
            </button>
        </div>

        <!-- Season Selector -->
        <div class="season-selector">
            <button class="season-btn active" data-season="spring">
                <div class="season-icon spring-icon">
                    <i class="fas fa-seedling"></i>
                </div>
                <div class="season-info">
                    <span class="season-name">Spring</span>
                    <span class="season-desc">Sep - Nov</span>
                </div>
            </button>
            <button class="season-btn" data-season="summer">
                <div class="season-icon summer-icon">
                    <i class="fas fa-sun"></i>
                </div>
                <div class="season-info">
                    <span class="season-name">Summer</span>
                    <span class="season-desc">Dec - Feb</span>
                </div>
            </button>
            <button class="season-btn" data-season="autumn">
                <div class="season-icon autumn-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="season-info">
                    <span class="season-name">Autumn</span>
                    <span class="season-desc">Mar - May</span>
                </div>
            </button>
            <button class="season-btn" data-season="winter">
                <div class="season-icon winter-icon">
                    <i class="fas fa-snowflake"></i>
                </div>
                <div class="season-info">
                    <span class="season-name">Winter</span>
                    <span class="season-desc">Jun - Aug</span>
                </div>
            </button>
        </div>

        <!-- Dynamic Content -->
        <div class="produce-content">
            <div class="content-header">
                <h2 id="content-title">NSW Spring Produce</h2>
                <p id="content-description">Fresh seasonal produce available in New South Wales during spring season.</p>
            </div>

            <!-- Search Box -->
            <div class="search-container">
                <input type="text" id="produce-search" placeholder="Search for fruits and vegetables..." class="search-input">
                <i class="fas fa-search search-icon"></i>
            </div>

            <!-- Type Filter -->
            <div class="type-filter">
                <button class="type-btn active" data-type="all">
                    <i class="fas fa-th"></i>
                    All
                </button>
                <button class="type-btn" data-type="fruits">
                    <i class="fas fa-apple-alt"></i>
                    Fruits
                </button>
                <button class="type-btn" data-type="vegetables">
                    <i class="fas fa-carrot"></i>
                    Vegetables
                </button>
            </div>

            <!-- Produce Grid -->
            <div class="produce-grid" id="produce-grid">
                <!-- Dynamic content will be populated here -->
            </div>

            <!-- No Results Message -->
            <div class="no-results" id="no-results" style="display: none;">
                <i class="fas fa-search"></i>
                <h3>No produce found</h3>
                <p>Try adjusting your search or filter options.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="section-container">
            <div class="footer-content">
                <p class="footer-text">Supporting healthy eating habits for a better life</p>
                <p class="footer-copyright">Â© 2024 Silver Spoon Society. Designed for senior wellness.</p>
            </div>
        </div>
    </footer>

    <script>
        // Seasonal produce functionality
        let seasonalData = {};
        let currentState = 'NSW';
        let currentSeason = 'spring';
        let currentType = 'all';

        document.addEventListener('DOMContentLoaded', function() {
            loadSeasonalData();
            initializeEventListeners();
        });

        // Load seasonal data from JSON file
        async function loadSeasonalData() {
            try {
                const response = await fetch('season_food.json');
                seasonalData = await response.json();
                updateContent();
            } catch (error) {
                console.error('Error loading seasonal data:', error);
                showError('Failed to load seasonal produce data');
            }
        }

        // Initialize all event listeners
        function initializeEventListeners() {
            // State selector
            const stateBtns = document.querySelectorAll('.state-btn');
            stateBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    stateBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentState = this.getAttribute('data-state');
                    updateContent();
                });
            });

            // Season selector
            const seasonBtns = document.querySelectorAll('.season-btn');
            seasonBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    seasonBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSeason = this.getAttribute('data-season');
                    updateContent();
                });
            });

            // Type filter
            const typeBtns = document.querySelectorAll('.type-btn');
            typeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    typeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentType = this.getAttribute('data-type');
                    updateContent();
                });
            });

            // Search functionality
            const searchInput = document.getElementById('produce-search');
            searchInput.addEventListener('input', debounce(updateContent, 300));

            // Mobile menu toggle
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');
            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', function() {
                    navLinks.classList.toggle('show');
                });
            }
        }

        // Update content based on current selections
        function updateContent() {
            updateTitle();
            renderProduce();
        }

        // Update page title and description
        function updateTitle() {
            const title = document.getElementById('content-title');
            const description = document.getElementById('content-description');

            const seasonName = currentSeason.charAt(0).toUpperCase() + currentSeason.slice(1);
            const seasonMonths = getSeasonMonths(currentSeason);
            title.textContent = `${currentState} ${seasonName} Produce`;
            description.textContent = `Fresh seasonal produce available in ${getStateName(currentState)} during ${seasonName.toLowerCase()} (${seasonMonths}).`;
        }

        // Get season months for Australia (Southern Hemisphere)
        function getSeasonMonths(season) {
            const seasonMonths = {
                'spring': 'Sep - Nov',
                'summer': 'Dec - Feb',
                'autumn': 'Mar - May',
                'winter': 'Jun - Aug'
            };
            return seasonMonths[season] || '';
        }

        // Render produce grid
        function renderProduce() {
            const grid = document.getElementById('produce-grid');
            const noResults = document.getElementById('no-results');
            const searchTerm = document.getElementById('produce-search').value.toLowerCase();

            if (!seasonalData[currentState]) {
                showError('Data not available for selected state');
                return;
            }

            let allProduce = [];

            // Collect produce from current state
            const stateData = seasonalData[currentState];

            // Add fruits if needed
            if (currentType === 'all' || currentType === 'fruits') {
                Object.entries(stateData.fruits || {}).forEach(([name, seasons]) => {
                    if (seasons.includes(currentSeason)) {
                        allProduce.push({ name, type: 'fruit', seasons });
                    }
                });
            }

            // Add vegetables if needed
            if (currentType === 'all' || currentType === 'vegetables') {
                Object.entries(stateData.vegetables || {}).forEach(([name, seasons]) => {
                    if (seasons.includes(currentSeason)) {
                        allProduce.push({ name, type: 'vegetable', seasons });
                    }
                });
            }

            // Filter by search term
            if (searchTerm) {
                allProduce = allProduce.filter(item =>
                    item.name.toLowerCase().includes(searchTerm)
                );
            }

            // Sort alphabetically
            allProduce.sort((a, b) => a.name.localeCompare(b.name));

            // Render results
            if (allProduce.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
            } else {
                grid.style.display = 'grid';
                noResults.style.display = 'none';
                grid.innerHTML = allProduce.map(item => createProduceCard(item)).join('');
            }
        }

        // Create individual produce card
        function createProduceCard(item) {
            const icon = item.type === 'fruit' ? 'fa-apple-alt' : 'fa-carrot';
            const typeClass = item.type === 'fruit' ? 'fruit-card' : 'vegetable-card';

            return `
                <div class="produce-card ${typeClass}">
                    <div class="produce-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="produce-info">
                        <h3 class="produce-name">${item.name}</h3>
                        <span class="produce-type">${item.type}</span>
                        <div class="produce-seasons">
                            ${item.seasons.map(season => `
                                <span class="season-tag ${season === currentSeason ? 'current' : ''}">${season}</span>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Get full state name
        function getStateName(code) {
            const stateNames = {
                'NSW': 'New South Wales',
                'VIC': 'Victoria',
                'QLD': 'Queensland',
                'WA': 'Western Australia',
                'SA': 'South Australia',
                'TAS': 'Tasmania'
            };
            return stateNames[code] || code;
        }

        // Show error message
        function showError(message) {
            const grid = document.getElementById('produce-grid');
            grid.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>${message}</p>
                </div>
            `;
        }

        // Debounce function for search
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>